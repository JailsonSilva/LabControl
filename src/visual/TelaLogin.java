package visual;

import conexao.Conexao;
import conexao.Teste;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.JPasswordField;
import javax.swing.JTextField;

/**
 * Classe para criação da tela de login
 * @author Jailson José dos Santos Silva
 * @version 1.0
 * @since realese 01 da aplicação
 */
public class TelaLogin extends javax.swing.JPanel {
    
    private static String usuario;
    private static String cpf;
    
    /**
     * Construtor da classe TelaLogin
     * @outhor Jailson José dos Santos Silva
     */
    public TelaLogin() {
        initComponents();
        
    }
    
    /**
     * Método para captura do atributo usuario
     * @author Jailson José dos Santos Silva
     * @return String - retorna o valor contido no atributo usuario
     */
    public static String getUsuario(){
        return usuario;
    }
    
    /**
     * Método para captura do atributo cpf
     * @author Jailson José dos Santos Silva
     * @return String - retorna o valor contido no atributo cpf
     */
    public static String getCpf(){
        return cpf;
    }
    
    /**
     * Método para alteração do atributo usuario
     * @author Jailson José dos Santos Silva
     * @param usuario String - informa o novo conteudo do atributo usuario
     */
    public void setUsuario(String usuario){
        this.usuario = usuario;
    }
    
    /**
     * Método para alteração do atributo cpf
     * @author Jailson José dos Santos Silva
     * @param cpf String - informa o novo conteudo do atributo cpf
     */
    public void setCpf(String cpf){
        this.cpf = cpf;
    }
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonAcessar = new javax.swing.JButton();
        fieldCpf = new javax.swing.JTextField();
        fieldSenha = new javax.swing.JPasswordField();
        labelCpf = new javax.swing.JLabel();
        labelSenha = new javax.swing.JLabel();
        labelTitulo = new javax.swing.JLabel();
        labelLogar = new javax.swing.JLabel();
        painelRodape = new javax.swing.JPanel();
        labelCadastrar = new javax.swing.JLabel();

        buttonAcessar.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        buttonAcessar.setText("Acessar");
        buttonAcessar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonAcessarActionPerformed(evt);
            }
        });

        fieldCpf.setFont(new java.awt.Font("Tahoma", 0, 36)); // NOI18N

        fieldSenha.setFont(new java.awt.Font("Tahoma", 0, 36)); // NOI18N
        fieldSenha.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        fieldSenha.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fieldSenhaActionPerformed(evt);
            }
        });

        labelCpf.setFont(new java.awt.Font("Tahoma", 0, 36)); // NOI18N
        labelCpf.setText("CPF:");

        labelSenha.setFont(new java.awt.Font("Tahoma", 0, 36)); // NOI18N
        labelSenha.setText("Senha:");

        labelTitulo.setFont(new java.awt.Font("Tahoma", 0, 60)); // NOI18N
        labelTitulo.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        labelTitulo.setText("LabControl");
        labelTitulo.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);

        labelLogar.setFont(new java.awt.Font("Tahoma", 0, 36)); // NOI18N
        labelLogar.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        labelLogar.setText("Logar:");
        labelLogar.setToolTipText("");

        painelRodape.setPreferredSize(new java.awt.Dimension(0, 90));

        labelCadastrar.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        labelCadastrar.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        labelCadastrar.setText("Se não possuir cadastro aperte o botão \"Cadastrar\" na barra do lado esquerdo");

        javax.swing.GroupLayout painelRodapeLayout = new javax.swing.GroupLayout(painelRodape);
        painelRodape.setLayout(painelRodapeLayout);
        painelRodapeLayout.setHorizontalGroup(
            painelRodapeLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(painelRodapeLayout.createSequentialGroup()
                .addGap(176, 176, 176)
                .addComponent(labelCadastrar)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        painelRodapeLayout.setVerticalGroup(
            painelRodapeLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, painelRodapeLayout.createSequentialGroup()
                .addContainerGap(40, Short.MAX_VALUE)
                .addComponent(labelCadastrar)
                .addGap(28, 28, 28))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(407, 407, 407)
                        .addComponent(labelLogar))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(123, 123, 123)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addGap(183, 183, 183)
                                .addComponent(buttonAcessar, javax.swing.GroupLayout.PREFERRED_SIZE, 185, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(239, 239, 239))
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(labelCpf, javax.swing.GroupLayout.PREFERRED_SIZE, 108, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(fieldCpf)
                                .addComponent(fieldSenha, javax.swing.GroupLayout.DEFAULT_SIZE, 665, Short.MAX_VALUE)
                                .addComponent(labelSenha)))))
                .addContainerGap(181, Short.MAX_VALUE))
            .addComponent(painelRodape, javax.swing.GroupLayout.DEFAULT_SIZE, 969, Short.MAX_VALUE)
            .addComponent(labelTitulo, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 969, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(47, 47, 47)
                .addComponent(labelTitulo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGap(40, 40, 40)
                .addComponent(labelLogar)
                .addGap(35, 35, 35)
                .addComponent(labelCpf, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(fieldCpf, javax.swing.GroupLayout.PREFERRED_SIZE, 55, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(48, 48, 48)
                .addComponent(labelSenha, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(fieldSenha)
                .addGap(65, 65, 65)
                .addComponent(buttonAcessar, javax.swing.GroupLayout.PREFERRED_SIZE, 48, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 47, Short.MAX_VALUE)
                .addComponent(painelRodape, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void buttonAcessarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buttonAcessarActionPerformed
        // cria uma String com o que foi digitado no campo fieldSenha
        String senha = new String(this.getFieldSenha().getPassword());
        
        Teste t = new Teste(); // instancia Teste paara fazer a conexao
            
            t.setConexao(new Conexao()); // seta os valores para conexão
        try {
            t.getConexao().conectar(); // conecta ao banco
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(TelaCadastro.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(TelaCadastro.class.getName()).log(Level.SEVERE, null, ex);
        }
		
        try { // pesquisar reservas no banco
            t.getConexao().logar(this.getFieldCpf().getText(), senha);
            String nome = t.getConexao().logar(this.getFieldCpf().getText(), senha);

            if(nome != null){
                this.setUsuario(nome);//setUsuario();
                this.setCpf(this.getFieldCpf().getText());
                JOptionPane.showMessageDialog(null, "Bem vindo(a) " + nome + "!");
            }
            else{
                JOptionPane.showMessageDialog(null, "CPF e/ou Senha não cadastrado!");
            }
            
        } catch (SQLException ex) {
            Logger.getLogger(TelaCadastro.class.getName()).log(Level.SEVERE, null, ex);
        } // fim da pesquisa de reservas

    }//GEN-LAST:event_buttonAcessarActionPerformed

    private void fieldSenhaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fieldSenhaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_fieldSenhaActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton buttonAcessar;
    private javax.swing.JTextField fieldCpf;
    private javax.swing.JPasswordField fieldSenha;
    private javax.swing.JLabel labelCadastrar;
    private javax.swing.JLabel labelCpf;
    private javax.swing.JLabel labelLogar;
    private javax.swing.JLabel labelSenha;
    private javax.swing.JLabel labelTitulo;
    private javax.swing.JPanel painelRodape;
    // End of variables declaration//GEN-END:variables

    /**
     * Método para captura do componente fieldCpf
     * @return JTextField - retorna o componente fieldCpf
     */
    public JTextField getFieldCpf(){
        return fieldCpf;
    }
    
    /**
     * Método para captura do componente fielSenha
     * @return JTextField - retorna o componente fieldSenha
     */
    public JPasswordField getFieldSenha(){
        return fieldSenha;
    }    
}
